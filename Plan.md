## План автоматизации web-сервиса покупки тура
**Перечень сценариев**
 
Под валидными или корректными данными при заполнении полей ввода приложения понимается:

*Номер карты:* 16 цифровых символов, в формате **** **** **** ****

*Месяц:* 01-12, но не ранее текущего месяца в случае, если указан текущий год

*Год:* последние две цифры года, не ранее текущего года и не более 5ти лет от текущего года

*Владелец:* буквенные символы латинского алфавита

*CVC:* 3 цифровых символа.

**Карты, представленные для тестирования (файл data.json):**

4444 4444 4444 4441, status APPROVED

4444 4444 4444 4442, status DECLINED

## Тестируемые Базы данных:

MySql

PostgreSQL

## Позитивные сценарии

**Покупка тура на вкладке "Купить" с главной страницы сервиса**

*Оплата валидной картой, с положительным балансом средств. Операция одобрена.*

Шаги по воспроизведению:

1. Открыть главную страницу сервиса http://localhost:8080/
2. Нажать кнопку "Купить"
3. Заполнить все поля валидными данными карты с достаточным количеством средств на счете (например, Номер карты - 4444444444444441, Месяц - 11, Год - 24, Владелец - Ivanov Ivan, CVC/CVV - 111)
4. Нажать кнопку "Продолжить"

*Ожидаемый результат:* В правом верхнем углу сообщение "Успешно Операция одобрена банком"


*Отказ в покупке при оплате картой с валидным номером и недостаточным балансом средств на счете.*

Шаги по воспроизведению:

1. Открыть главную страницу сервиса http://localhost:8080/
2. Нажать кнопку "Купить"
3. Заполнить все поля валидными данными карты с недостаточным количеством средств на счете (например, Номер карты - 4444444444444442, Месяц - 12, Год - 26, Владелец - Ivanov Ivan, CVC/CVV - 333)
4. Нажать кнопку "Продолжить

*Ожидаемый результат:* В правом верхнем углу появляется сообщение "Ошибка! Банк отказал в проведении операции"


**Покупка тура на вкладке "Купить в кредит" с главной страницы сервиса.**

*Успешная покупка в кредит при оплате картой с валидным номером и достаточным кредитным лимитом*

Шаги по воспроизведению:

1. Открыть главную страницу сервиса http://localhost:8080/
2. Нажать кнопку "Купить в кредит"
3. Заполнить все поля валидными данными карты с достаточным кредитным лимитом (например, Номер карты - 4444444444444441, Месяц - 12, Год - 26, Владелец - Ivanov Ivan, CVC/CVV - 333)
4. Нажать кнопку "Продолжить

*Ожидаемый результат:* В правом верхнем углу появляется сообщение "Успешно Операция одобрена банком"


*Отказ в покупке в кредит при оплате картой с валидным номером и недостаточным кредитным лимитом*

Шаги по воспроизведению:

1. Открыть главную страницу сервиса http://localhost:8080/
2. Нажать кнопку "Купить в кредит"
3. Заполнить все поля валидными данными карты с недостаточным кредитным лимитом (например, Номер карты - 4444444444444442, Месяц - 12, Год - 26, Владелец - Ivanov Ivan, CVC/CVV - 333)
4. Нажать кнопку "Продолжить"

*Ожидаемый результат:* В правом верхнем углу появляется сообщение "Ошибка! Банк отказал в проведении операции"


## Негативные сценарии

**Все поля - пустые**

После выполнения предусловий оставить все поля незаполненными и нажать кнопку "Продолжить"

Данный случай является невалидным для всех полей формы (в этом случае возникают ошибки "Поле обязательно для заполнения", "Неверный формат")

**Поле "Номер карты"**

Поле "Номер карты" присутствует в обеих формах: "Оплата по карте" и "Кредит по данным карты" и допускает для ввода только цифры и их количество - 16.

Предусловия для формы "Купить":

На главной странице сервиса нажимаем на кнопку "Купить";

Заполняем поля следующими валидными данными: "Месяц" = "12", "Год" = "26", "Владелец" = "Ivanov Ivan", "CVV" = "333".

Предусловия для формы "Купить в кредит":

На главной странице сервиса нажимаем на кнопку "Купить в кредит";

Заполняем поля следующими валидными данными: "Месяц" = "12", "Год" = "26", "Владелец" = "Ivanov Ivan", "CVV" = "333".

Невалидные данные для поля "Номер карты" (в этом случае возникают ошибки в зависимости от данных - под полем возникает ошибка красным цветом "Неверный формат", "Поле обязательно для заполнения", всплывающее окно в правом верхнем углу "Ошибка! Банк отказал в проведении операции."):

**Пустое поле**

Номер карты содержит количество цифр менее 16

Номер карты не содержится в базе данных банка, например "5555444444444441"

**Поле "Месяц"**

Требования: данное поле принимает на вход номер месяца от 1 до 12, причем числам от 1 до 9 всегда предшествует 0, т.к. форма принимает только 2 числа.

Предусловия для формы "Купить":

На главной странице сервиса нажимаем на кнопку "Купить";

Заполняем поля следующими валидными данными: "Номер" = "4444 4444 4444 4441", "Год" = "22", "Владелец" = "Ivanov Ivan", "CVV" = "123".

Предусловия для формы "Купить в кредит":

На главной странице сервиса нажимаем на кнопку "Купить в кредит";

Заполняем поля следующими валидными данными: "Номер" = "4444 4444 4444 4441", "Год" = "26", "Владелец" = "Ivanov Ivan", "CVV" = "333".

Невалидные данные для поля "Месяц" (в этом случае возникают ошибки в зависимости от данных - под полем возникает ошибка красным цветом "Неверный формат", "Поле обязательно для заполнения", "Неверно указан срок действия карты"):

*Пустое поле*

Поле содержит одну цифру (например, 1)

Поле содержит двузначное число более 12 (например, 18)

Поле содержит нулевое значение (например, 00)

**Поле "Год"**

Требования: данное поле принимает на вход номер года в формате двух последних цифр.

Предусловия для формы "Купить":

На главной странице сервиса нажимаем на кнопку "Купить";

Заполняем поля следующими валидными данными: "Номер" = "4444 4444 4444 4441", "Месяц" = "12", "Владелец" = "Ivanov Ivan", "CVV" = "333".

Предусловия для формы "Купить в кредит":

На главной странице сервиса нажимаем на кнопку "Купить в кредит";

Заполняем поля следующими валидными данными: "Номер" = "4444 4444 4444 4441", "Месяц" = "12", "Владелец" = "Ivanov Ivan", "CVV" = "333".

Невалидные данные для поля "Год" (в этом случае возникают ошибки в зависимости от данных - под полем возникает ошибка красным цветом "Неверный формат", "Поле обязательно для заполнения", "Неверно указан срок действия карты", "Истёк срок действия карты"):

*Пустое поле*

Поле содержит одну цифру (например, 1)

Поле содержит год ранее текущего (например, 21)

Поле содержит нулевое значение (например, 00)

Поле содержит год намного позднее текущего (например, 78)

**Поле "Владелец"**

Требования: данное поле принимает на вход только фамилию и имя на латинском, первая буква в каждом из слов автоматически делается заглавной.

Предусловия для формы "Купить":

На главной странице сервиса нажимаем на кнопку "Купить";

Заполняем поля следующими валидными данными: "Номер" = "4444 4444 4444 4441", "Год" = "26", "Месяц" = "12", "CVV" = "333".

Предусловия для формы "Купить в кредит":

На главной странице сервиса нажимаем на кнопку "Купить в кредит";

Заполняем поля следующими валидными данными: "Номер" = "4444 4444 4444 4441", "Год" = "26", "Месяц" = "12", "CVV" = "333".

Невалидные данные для поля "Владелец" (в этом случае возникают ошибки в зависимости от данных - под полем возникает ошибка красным цветом "Неверный формат", "Поле обязательно для заполнения"):

*Пустое поле*

Поле содержит одно слово на английском языке (например, Ivanov)

Поле содержит три слова на английском языке (например, Ivanov Ivan Ivanovich)

Заявка не должна отправляться, если поле "Владелец" содержит фамилию и имя в нижнем регистре (например, "ivanov ivan");

Заявка не должна отправляться, если поле "Владелец" содержит фамилию и имя в верхнем регистре (например, "IVANOV PETR");

Поле содержит русские буквы (например, Иванов Иван)

Поле содержит цифры (например, 1234 5678)

Поле содержит спецсимволы (например, #%№)

**Поле "CVC/CVV"**

Требования: данное поле принимает на вход только 3 цифры.

Предусловия для формы "Купить":

На главной странице сервиса нажимаем на кнопку "Купить";

Заполняем поля следующими валидными данными: "Номер" = "4444 4444 4444 4441", "Год" = "26", "Месяц" = "12", "Владелец" = "Ivanov Ivan".

Предусловия для формы "Купить в кредит":

На главной странице сервиса нажимаем на кнопку "Купить в кредит";

Заполняем поля следующими валидными данными: "Номер" = "4444 4444 4444 4441", "Год" = "26", "Месяц" = "12", "Владелец" = "Ivanov Ivan".

Невалидные данные для поля "CVC/CVV" (в этом случае возникают ошибки в зависимости от данных - под полем возникает ошибка красным цветом "Неверный формат", "Поле обязательно для заполнения"):

*Пустое поле*

Поле содержит одну цифру (например, 1)

Поле содержит две цифры (например, 12)

Поле содержит три нуля (000)


## Перечень используемых инструментов с обоснованием выбора

*Java 8* - язык написания авто-тестов, наиболее надежная версия

*Gradle* - система автоматизации сборки и управления зависимостями

*JUnit* — платформа для написания авто-тестов и их запуска

*Selenide* - фреймворк для автоматизированного тестирования веб-приложений на основе Selenium WebDriver, более удобный и простой в использовании, чем Selenium

*Docker Compose* - инструмент, позволяющий запускать мультиконтейнерные приложения, чтобы не устанавливать на компьютер необходимые для работы приложения Node.js и СУБД

*Allure* - фреймворк, предназначенный для создания отчетов, более наглядных, чем у Gradle
 
## Перечень и описание возможных рисков при автоматизации

Из-за отсутствия ТЗ и какой-либо документации сложно понять, как должно работать приложение и какое поведение системы нужно считать ошибкой
Реальная система и реальные данные скорее всего будут отличаться от SUT и тестовых данных, и автоматизация тестирования может оказаться бесполезной
Использование сторонних библиотек и фреймворков может увеличивать риск возникновения технических проблем
Возможны проблемы из-за необходимости поддержки двух СУБД (MySQL, Postgres)
Отсутствие test_id усложняет написание и поддержку тестов


## Интервальная оценка с учётом рисков (в часах)

Разработка плана тестирования - 10 часов;

Подготовка необходимых инструментов, написание кода автотестов - 60-120 часов;

Подготовка отчетной документации, баг-репортов - 22 часа;

Запас в виде 24 часов на непредвиденные обстоятельства.

## План сдачи работ

*Автоматизация* - 18.06.2022

*Подготовка отчетных документов* - 22.06.2022

